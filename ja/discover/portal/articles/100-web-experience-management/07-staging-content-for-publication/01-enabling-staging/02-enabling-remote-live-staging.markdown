---
header-id: enabling-remote-live-staging
---

# リモートライブステージングの有効化

<p class="alert alert-info"><span class="wysiwyg-color-blue120">ご覧のページは、お客様の利便性のために一部機械翻訳されています。また、ドキュメントは頻繁に更新が加えられており、翻訳は未完成の部分が含まれることをご了承ください。最新情報は都度公開されておりますため、必ず英語版をご参照ください。翻訳に問題がある場合は、<a href="mailto:support-content-jp@liferay.com">こちら</a>までご連絡ください。</span></p>

[TOC levels=1-4]

リモートライブステージングでは、現在のサイトとリモートLiferayサーバー上の別のサイトとの間に接続が確立されます。 リモートサイトがライブ環境になり、現在のサイトがステージング環境になります。ステージングのみに使用されるLiferayのインスタンスです。 リモート（ライブ）Liferayサーバーとローカル（ステージング）Liferayサーバーは、完全に別のシステムである必要があります。 たとえば、同じデータベースを共有しないでください。 リモートライブステージングを有効にすると、必要なすべての情報が2つのサーバーを接続するネットワークを介して転送されます。 コンテンツ作成者はステージングサーバーを使用して変更を加え、ライブサーバーは受信ユーザートラフィックを処理します。 サイトへの変更を公開する準備ができると、ネットワーク経由でリモートのライブサーバーにプッシュされます。

ライブステージングの削除を有効にする前に、Liferayサーバーとリモートサーバーが適切に構成されていることを確認してください。 これを行うには、 [リモートライブステージング用のサーバーの構成](/docs/7-1/user/-/knowledge_base/u/configuring-servers-for-remote-live-staging) 記事に従ってください。

*Publishing* → *Staging* メニューに移動して、サイトのリモートステージングを有効にできます。 以下の手順に従って、サイトのリモートライブステージング環境を作成します。

1.  製品メニュー（左側）に移動し、[ *Publishing* →[ *Staging*]を選択します。

2.  *Remote Live*選択し* 。 リモートライブ接続設定の追加フィールドが表示されます。</p>

    ![図1：リモートLiferayサーバーとローカルLiferayサーバーが互いに通信するように構成された後、いくつかのリモートLive接続設定を指定する必要があります。](../../../../images/remote-live-staging-settings.png)</li>

3

リモートLiferayサーバーのIPアドレスを[リモートホスト/ IP]フィールドに入力します。 このフィールドは、 `portal-ext.properties` ファイルの `tunnel.servlet.hosts.allowed` プロパティとして指定したホストと一致する必要があります。 IPv6アドレスを構成している場合は、 *リモートホスト/ IP* フィールドに入力するときにブラケットを含める必要があります（例： *\ [0：0：0：0：0：0：0：1 \]*）。

    リモートLiferayサーバーがクラスターの場合、公開ホスト/ IPをクラスターの負荷分散されたIPアドレスに設定して、公開プロセスの可用性を向上させることができます。 詳細については、「 [クラスター環境でのリモートステージングの構成](/docs/7-1/deploy/-/knowledge_base/d/configuring-remote-staging-in-a-clustered-environment) を参照してください。

4

リモートのLiferayインスタンスが実行されているポートを[リモートポート]フィールドに入力します。 リモートのLiferayサーバーで非ルートポータルサーブレットコンテキストが使用されている場合にのみ、リモートパスコンテキストを入力する必要があります。

5

ライブ環境用のリモートLiferayサーバー上のサイトのIDを入力します。 リモートLiferayサーバーでサイトがまだ準備されていない場合は、リモートLiferayサーバーにログインして、新しい空のサイトを作成できます。

    サイトが作成されたら、サイトIDをメモして、ローカルのLiferayサーバーの[リモートサイトID]フィールドに入力できるようにします。 コントロールパネルの[サイト]ページでサイトの名前を選択すると、サイトのIDを見つけることができます。

6

ローカルの（ステージング）Liferayサーバーからリモートの（ライブ）Liferayサーバーへのページの公開にHTTPSを使用するには、 *Use a Secure Network Connection* フィールドをチェックします。

7

ページのバージョン管理を有効にするかどうかを決定し、ステージングされたコンテンツを選択します。 これらのオプションの詳細については、 [ページのバージョン管理とステージコンテンツの有効化](/docs/7-1/user/-/knowledge_base/u/enabling-page-versioning-and-staged-content) 記事を参照してください。

8

[ *保存*クリックします。</ol>

ステージングプロセスが正式に開始されました\！

現在のサーバーとリモートサーバーを適切に構成できない場合、ステージングを有効にできず、エラーメッセージが表示されます。 問題がある場合は、 [サーバーが正しく構成されていることを確認してください](/docs/7-1/user/-/knowledge_base/u/configuring-servers-for-remote-live-staging)。

ユーザーがローカル（ステージング）サーバーからリモート（ライブ）サーバーに変更を公開すると、@product@はユーザーの電子メールアドレス、スクリーン名、またはユーザーIDをリモートサーバーに渡して、権限チェックを実行します。 公開操作を成功させるには、ローカル（ステージング）サーバーとリモート（ライブ）サーバーの両方で同じ資格情報とアクセス許可を持つユーザーが操作を実行する必要があります。 これは、ユーザーが変更をすぐに公開しようとするか、後で公開するようにスケジュールするかとは関係ありません。

ステージングから本番への変更を公開する権限を少数のユーザーだけに付与する必要がある場合、ローカルサーバーで選択した少数に一致する少数のユーザーアカウントをリモートサーバーに作成するのは簡単です。 ただし、作成する必要があるユーザーアカウントが多いほど、このジョブは面倒になり、ミスをする可能性が高くなります。 また、同一のユーザーアカウントを作成するだけでなく、これらのユーザーに同一の権限を付与する必要もあります。 このため、LDAPを使用して、選択したユーザーアカウントをローカル（ステージング）Liferayサーバーからリモート（ライブ）Liferayサーバーにコピーすることをお勧めします。 Liferayの仮想LDAPサーバーアプリケーションは、Liferay Marketplaceで入手でき、これを簡単にします。

ステージング環境をオフにする必要がある場合は、[公開]ドロップダウンから *ステージング* 戻ります。 詳細については、 [ステージングの無効化](/docs/7-1/user/-/knowledge_base/u/disabling-staging) 記事を参照してください。

すごい\！ これで、リモートライブステージングを使用する準備が整いました。

---
header-id: creating-new-audience-targeting-rule-types
---

# 新しいオーディエンスターゲティングルールタイプの作成

<p class="alert alert-info"><span class="wysiwyg-color-blue120">ご覧のページは、お客様の利便性のために一部機械翻訳されています。また、ドキュメントは頻繁に更新が加えられており、翻訳は未完成の部分が含まれることをご了承ください。最新情報は都度公開されておりますため、必ず英語版をご参照ください。翻訳に問題がある場合は、<a href="mailto:support-content-jp@liferay.com">こちら</a>までご連絡ください。</span></p>

[TOC levels=1-4]

オーディエンスターゲティングでは、ユーザーセグメントは、一連のルールに一致するユーザーのグループとして定義されます。 Liferayは、箱から出して、年齢範囲、性別、場所などの特性に基づいたいくつかのタイプのルールを提供します。 これらのルールを組み合わせてユーザーセグメントを作成します。 たとえば、特定のスタイルの靴の買い手の見込み顧客をターゲットにしたい場合は、都市部に住む40歳以上の女性で構成されるユーザーセグメントを作成します。

オーディエンスターゲティングにはユーザーセグメントの多くのルールが付属していますが、それも拡張可能です。自分のケースに適合するルールがない場合は、自分で作成できます\！

ルールタイプの作成には、評価する対象のターゲティングが含まれます。 アウトドアスポーツ用品店を経営しているとします。 ウェブサイトで、現在の天気に適した商品を宣伝したいとします。 ユーザーがロサンゼルス出身で、ウェブサイトにアクセスした日に雨が降っている場合、そのユーザーに新しい傘を見せることができます。 ただし、晴れている場合は、代わりにユーザーのサングラスを表示することができます。 この例では、評価エンティティはユーザーの場所に基づく天気です。 これを機能させるには、次の2つのことを行う必要があります。

1.  ユーザーの場所を取得して、その場所の天気を取得できます。

2.  管理者は、天気オプションの選択リストなどのUIコンポーネントを使用して、ユーザーの現在の天気と比較する値を設定できます。

この設計では、管理者は *雨* をルールの値として設定でき、雨関連商品をターゲットとするユーザーセグメントにルールを追加できます。 ユーザーがサイトにアクセスすると、ユーザーセグメントの割り当ては、現在の場所の天気とルールの事前設定された天気の値（雨）を照合することから行われます。 試合では、雨関連のコンテンツを表示します。それ以外の場合、ユーザーは別のユーザーセグメントの一部であり、サングラスのプロモーションのように、そのセグメントのコンテンツが表示されます。

カスタムルールタイプを作成するには、4つの手順があります。

1.  モジュールを作成し、必要なコンテンツターゲティングAPIの依存関係があることを確認します。

2.  [`com.liferay.content.targeting.api.model.Rule`](https://repository.liferay.com/nexus/service/local/artifact/maven/redirect?r=liferay-public-releases&g=com.liferay.content-targeting&a=com.liferay.content.targeting.api&v=5.0.0&e=jar&c=javadoc) インターフェースのメソッドを実装することにより、ルールの動作を定義します。

3.  ルール評価基準を作成します。

4.  ルールのUIを定義します。

![図1：この図は、気象ルールの評価プロセスを分類したものです。](../../../images-dxp/weather-rule-diagram.png)

カスタムルールの開発を計画する方法がわかったので、カスタムルールを作成できます\！
